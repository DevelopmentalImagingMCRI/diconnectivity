<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
  <title>MRtrix 0.2.12 documentation</title>
  <link rel="stylesheet" href="../stylesheet.css" type="text/css" media=screen>
</head>

<body>

<table class=nav>
  <tr>
    <td><a href="cleanup_ANTS_warp.html"><img src="../left.png"></a></td>
    <td><a href="index.html"><img src="../up.png"></a></td>
    <td><a href="../index.html"><img src="../home.png"></a></td>
    <th>csdeconv</th>
    <td><a href="dicom_filename.html"><img src="../right.png"></a></td>
  </tr>
</table>

<h2>Description</h2>
<p>
perform non-negativity constrained spherical deconvolution.
</p>
<p>
Note that this program makes use of implied symmetries in the diffusion profile. First, the fact the signal attenuation profile is real implies that it has conjugate symmetry, i.e. Y(l,-m) = Y(l,m)* (where * denotes the complex conjugate). Second, the diffusion profile should be antipodally symmetric (i.e. S(x) = S(-x)), implying that all odd l components should be zero. Therefore, this program only computes the even elements.
</p>
<p>
Note that the spherical harmonics equations used here differ slightly from those conventionally used, in that the (-1)^m factor has been omitted. This should be taken into account in all subsequent calculations.
</p>
<p>
Each volume in the output image corresponds to a different spherical harmonic component, according to the following convention:
</p>
<p>
[0]     Y(0,0)
</p>
<p>

</p>
<p>
[1] Im {Y(2,2)}
</p>
<p>
[2] Im {Y(2,1)}
</p>
<p>
[3]     Y(2,0)
</p>
<p>
[4] Re {Y(2,1)}
</p>
<p>
[5] Re {Y(2,2)}
</p>
<p>

</p>
<p>
[6] Im {Y(4,4)}
</p>
<p>
[7] Im {Y(4,3)}
</p>
<p>
etc...
</p>
<p>

</p>
<p class=indented><strong>syntax:</strong> &nbsp; &nbsp; csdeconv [ options ] dwi response SH </p>
<h2>Arguments</h2>
<table class=args>
<tr><td><b>dwi</b></td>
<td>the input diffusion-weighted image.</td></tr>
<tr><td><b>response</b></td>
<td>the diffusion-weighted signal response function for a single fibre population.</td></tr>
<tr><td><b>SH</b></td>
<td>the output spherical harmonics coefficients image.</td></tr>
</table>
<h2>Options</h2>
<table class=args>
<tr><td nowrap><b>-grad</b>&nbsp;<i>encoding</i></td>
<td>specify the diffusion-weighted gradient scheme used in the acquisition. The program will normally attempt to use the encoding stored in image header.
<table class=opts>
<tr><td><i>encoding</i></td>
<td>the gradient encoding, supplied as a 4xN text file with each line is in the format [ X Y Z b ], where [ X Y Z ] describe the direction of the applied gradient, and b gives the b-value in units (1000 s/mm^2).</td></tr>
</table></td></tr>
<tr><td nowrap><b>-lmax</b>&nbsp;<i>order</i></td>
<td>set the maximum harmonic order for the output series. By default, the program will use the highest possible lmax given the number of diffusion-weighted images.
<table class=opts>
<tr><td><i>order</i></td>
<td>the maximum harmonic order to use.</td></tr>
</table></td></tr>
<tr><td nowrap><b>-mask</b>&nbsp;<i>image</i></td>
<td>only perform computation within the specified binary brain mask image.
<table class=opts>
<tr><td><i>image</i></td>
<td>the mask image to use.</td></tr>
</table></td></tr>
<tr><td nowrap><b>-directions</b>&nbsp;<i>file</i></td>
<td>specify the directions over which to apply the non-negativity constraint (by default, the built-in 300 direction set is used
<table class=opts>
<tr><td><i>file</i></td>
<td>a text file containing the [ el az ] pairs for the directions.</td></tr>
</table></td></tr>
<tr><td nowrap><b>-filter</b>&nbsp;<i>spec</i></td>
<td>the linear frequency filtering parameters used for the initial linear spherical deconvolution step (default = [ 1 1 1 0 0 ]).
<table class=opts>
<tr><td><i>spec</i></td>
<td>a text file containing the filtering coefficients for each even harmonic order.</td></tr>
</table></td></tr>
<tr><td nowrap><b>-normalise</b></td>
<td>normalise the DW signal to the b=0 image</td></tr>
<tr><td nowrap><b>-lambda</b>&nbsp;<i>value</i></td>
<td>the regularisation parameter lambda that controls the strength of the constraint (default = 1.0).
<table class=opts>
<tr><td><i>value</i></td>
<td>the value of lambda to use.</td></tr>
</table></td></tr>
<tr><td nowrap><b>-threshold</b>&nbsp;<i>value</i></td>
<td>the threshold below which the amplitude of the FOD is assumed to be zero, expressed as a fraction of the mean value of the initial FOD (default = 0.1).
<table class=opts>
<tr><td><i>value</i></td>
<td>the value of lambda to use.</td></tr>
</table></td></tr>
<tr><td nowrap><b>-niter</b>&nbsp;<i>number</i></td>
<td>the maximum number of iterations to perform for each voxel (default = 50).
<table class=opts>
<tr><td><i>number</i></td>
<td>the maximum number of iterations to use.</td></tr>
</table></td></tr>
<tr><td nowrap><b>-info</b></td>
<td>display information messages.</td></tr>
<tr><td nowrap><b>-quiet</b></td>
<td>do not display information messages or progress status.</td></tr>
<tr><td nowrap><b>-debug</b></td>
<td>display debugging messages.</td></tr>
<tr><td nowrap><b>-help</b></td>
<td>display this information page and exit.</td></tr>
<tr><td nowrap><b>-version</b></td>
<td>display version information and exit.</td></tr>
</table>

<p class=footer>
Donald Tournier<br>
MRtrix version 0.2.12<br>
Last updated 2014-02-25
</p>

</body>
</html>
